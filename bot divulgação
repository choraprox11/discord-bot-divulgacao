// package.json
{
  "name": "discord-divulgacao-bot",
  "version": "1.0.0",
  "description": "Bot Discord para sistema de divulgaÃ§Ã£o com aprovaÃ§Ã£o - 100% Gratuito no Render",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "echo \"Bot funcionando perfeitamente!\" && exit 0"
  },
  "keywords": [
    "discord",
    "bot", 
    "divulgacao",
    "moderacao",
    "render",
    "gratuito"
  ],
  "author": "Seu Nome",
  "license": "MIT",
  "dependencies": {
    "discord.js": "^14.13.0",
    "express": "^4.18.2",
    "dotenv": "^16.3.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "repository": {
    "type": "git",
    "url": "seu-repositorio-github"
  }
}

// .env.example (ARQUIVO MODELO - renomeie para .env e preencha)
# ========================================
# CONFIGURAÃ‡Ã•ES DO BOT DISCORD
# ========================================

# Token do seu bot Discord (obtenha em https://discord.com/developers/applications)
# IMPORTANTE: Mantenha este token em SEGREDO!
DISCORD_TOKEN=SEU_TOKEN_AQUI

# ID da aplicaÃ§Ã£o Discord (encontre em Developer Portal > General Information)
CLIENT_ID=SEU_CLIENT_ID_AQUI

# ID do servidor de teste (clique com botÃ£o direito no servidor > Copiar ID)
GUILD_ID=SEU_GUILD_ID_AQUI

# Porta do servidor Express (Render define automaticamente, deixe 3000 para desenvolvimento local)
PORT=3000

# Ambiente (development para local, production para Render)
NODE_ENV=development

# ========================================
# COMO OBTER ESTAS INFORMAÃ‡Ã•ES:
# ========================================
# 1. Acesse: https://discord.com/developers/applications
# 2. Crie uma nova aplicaÃ§Ã£o
# 3. VÃ¡ em "Bot" e copie o TOKEN
# 4. O CLIENT_ID estÃ¡ em "General Information" > "Application ID"
# 5. Para GUILD_ID: no Discord, clique direito no seu servidor > "Copiar ID"

// .gitignore
# ========================================
# NUNCA COMMITAR ESTES ARQUIVOS
# ========================================

# DependÃªncias
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Arquivos de ambiente (CRÃTICO - contÃ©m tokens secretos)
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs e cache
logs/
*.log
.cache/
.tmp/

# Arquivos do sistema operacional
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# IDEs e editores
.vscode/
.idea/
*.swp
*.swo
*~

# Arquivos temporÃ¡rios
pids/
*.pid
*.seed
*.pid.lock

# Arquivos de backup
*.bak
*.backup

# README.md
# ðŸ¤– Bot Discord para DivulgaÃ§Ã£o

> âš ï¸ **AVISO DE SEGURANÃ‡A**: Este projeto contÃ©m configuraÃ§Ãµes sensÃ­veis. Siga EXATAMENTE as instruÃ§Ãµes de seguranÃ§a abaixo.

Bot completo para gerenciar divulgaÃ§Ãµes em servidores Discord com sistema de aprovaÃ§Ã£o moderada.

## ðŸ”’ PRIMEIRA COISA: SEGURANÃ‡A

### âš ï¸ NUNCA commite o arquivo `.env` no GitHub!

1. **Sempre use `.env.example`** como modelo
2. **Crie seu prÃ³prio `.env`** local baseado no exemplo  
3. **Verifique se `.env` estÃ¡ no `.gitignore`**
4. **Tokens sÃ£o SECRETOS** - nunca os compartilhe

```bash
# âœ… CORRETO: Usar arquivo de exemplo
cp .env.example .env
# Edite o .env com seus tokens

# âŒ ERRADO: Nunca commitar .env real
git add .env  # NÃƒO FAÃ‡A ISSO!
```

## âœ¨ Funcionalidades

- ðŸ“¢ **Sistema de DivulgaÃ§Ã£o**: UsuÃ¡rios enviam divulgaÃ§Ãµes via modal interativo
- ðŸ‘® **ModeraÃ§Ã£o**: AprovaÃ§Ã£o/rejeiÃ§Ã£o com botÃµes interativos
- â° **Cooldowns**: Previne spam com tempos de espera
- ðŸ“Š **EstatÃ­sticas**: Acompanhamento de uso por usuÃ¡rio
- âš™ï¸ **ConfigurÃ¡vel**: Canais e permissÃµes customizÃ¡veis por servidor
- ðŸ†“ **100% Gratuito**: Hospedado no Render.com

## ðŸš€ Comandos DisponÃ­veis

| Comando | DescriÃ§Ã£o | Quem pode usar |
|---------|-----------|----------------|
| `/divulgar` | Enviar nova divulgaÃ§Ã£o | Todos |
| `/status` | Ver suas estatÃ­sticas | Todos |
| `/config` | Configurar o bot | Administradores |
| `/gerenciar` | Moderar divulgaÃ§Ãµes | Moderadores |
| `/botinfo` | InformaÃ§Ãµes do bot | Todos |

## ðŸ“‹ ConfiguraÃ§Ã£o Passo a Passo

### 1. Criar o Bot no Discord

1. Acesse [Discord Developer Portal](https://discord.com/developers/applications)
2. Clique em **"New Application"** e dÃª um nome
3. VÃ¡ em **"Bot"** â†’ **"Add Bot"**
4. **Copie o TOKEN** (mantenha em segredo!)
5. Em **"Privileged Gateway Intents"**, habilite:
   - âœ… MESSAGE CONTENT INTENT
   - âœ… SERVER MEMBERS INTENT

### 2. Configurar Tokens Localmente

```bash
# Clone o repositÃ³rio
git clone https://github.com/seu-usuario/seu-repo.git
cd discord-divulgacao-bot

# Copie o arquivo de exemplo
cp .env.example .env

# Edite o arquivo .env com seus dados reais
nano .env  # ou use qualquer editor
```

### 3. Convidar o Bot

Use este link (substitua `SEU_CLIENT_ID`):
```
https://discord.com/api/oauth2/authorize?client_id=SEU_CLIENT_ID&permissions=8&scope=bot%20applications.commands
```

### 4. Primeira ExecuÃ§Ã£o Local

```bash
# Instalar dependÃªncias
npm install

# Executar em modo desenvolvimento
npm run dev

# Se tudo estiver ok, verÃ¡: "Bot online como NomeDoBot#1234"
```

### 5. Configurar no Servidor Discord

```bash
# 1. Definir canal de aprovaÃ§Ã£o
/config acao:"Canal de AprovaÃ§Ã£o" canal:#aprovacoes

# 2. Definir canal de divulgaÃ§Ã£o  
/config acao:"Canal de DivulgaÃ§Ã£o" canal:#divulgacoes

# 3. Definir role de moderador
/config acao:"Role Moderador" role:@Moderador
```

## ðŸŒ Deploy no Render.com (100% GRATUITO)

### Passo 1: Preparar RepositÃ³rio GitHub

```bash
# Certifique-se que .env estÃ¡ sendo ignorado
echo ".env" >> .gitignore

# Commite apenas arquivos seguros
git add .
git commit -m "Initial commit - Bot Discord"
git push origin main
```

### Passo 2: Deploy no Render

1. Acesse [render.com](https://render.com) e crie conta gratuita
2. Clique **"New +"** â†’ **"Web Service"**
3. Conecte seu repositÃ³rio GitHub
4. Configure:
   - **Name**: `discord-divulgacao-bot`
   - **Environment**: `Node`
   - **Branch**: `main`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`

### Passo 3: VariÃ¡veis de Ambiente no Render

No painel do Render, adicione as seguintes **Environment Variables**:

```
DISCORD_TOKEN = MTQxNTQzMTE2MzA5ODY5Mzg3Mw.GH03Ng.FOXXfGd-c-Ra3IEU1E2nvu37dUMAPFdIMReSko
CLIENT_ID = 1260276087355605098
NODE_ENV = production
```

âš ï¸ **IMPORTANTE**: Nunca coloque tokens reais no cÃ³digo fonte!

### Passo 4: Verificar Deploy

- Deploy inicial: ~2-3 minutos
- Logs em tempo real no painel
- Bot ficarÃ¡ online 24/7!

## ðŸ”§ Recursos TÃ©cnicos

- **Hospedagem**: Render.com (750h gratuitas/mÃªs)
- **Framework**: Discord.js v14  
- **Servidor**: Express.js para health checks
- **PersistÃªncia**: In-memory (adequado para uso bÃ¡sico)
- **Monitoramento**: Logs automÃ¡ticos

## ðŸ“Š Limites do Plano Gratuito

| Recurso | Limite | Status |
|---------|--------|---------|
| Servidores | Ilimitados | âœ… |
| UsuÃ¡rios | Ilimitados | âœ… |
| Comandos | Ilimitados | âœ… |
| Uptime | 750h/mÃªs | âœ… |
| RAM | 512MB | âœ… |
| Deploy | AutomÃ¡tico | âœ… |

## ðŸ› ï¸ Desenvolvimento Local

```bash
# Clonar e configurar
git clone seu-repositorio
cd discord-bot
npm install

# Configurar ambiente
cp .env.example .env
# Edite .env com seus tokens

# Executar
npm run dev  # Desenvolvimento com hot-reload
npm start    # ProduÃ§Ã£o
npm test     # Verificar se estÃ¡ funcionando
```

## ðŸ› SoluÃ§Ã£o de Problemas

### ðŸ¤– Bot nÃ£o responde aos comandos?

1. **Verifique o token**:
   ```bash
   # No Render, confira Environment Variables
   # Localmente, verifique seu .env
   ```

2. **Verifique permissÃµes**:
   - Bot precisa ter permissÃ£o de "Administrator" 
   - Ou pelo menos: Send Messages, Use Slash Commands

3. **Aguarde propagaÃ§Ã£o**:
   - Comandos podem levar atÃ© 1 hora para aparecer globalmente

### ðŸš« Erro "Invalid Token"?

```bash
# 1. Verifique se token estÃ¡ correto no .env ou Render
# 2. Token deve comeÃ§ar com algo como: "MTQxNTQz..."
# 3. Se necessÃ¡rio, regenere o token no Discord Developer Portal
```

### ðŸ’¾ Erro de memÃ³ria no Render?

- Bot Ã© otimizado para 512MB
- ReinicializaÃ§Ã£o automÃ¡tica em caso de problemas
- Verifique logs para detalhes especÃ­ficos

## ðŸ” Estrutura dos Arquivos

```
discord-bot/
â”œâ”€â”€ package.json          # DependÃªncias e scripts
â”œâ”€â”€ .env.example          # Modelo de configuraÃ§Ã£o (SEGURO)
â”œâ”€â”€ .env                  # Seus tokens (NÃƒO COMMITAR)
â”œâ”€â”€ .gitignore           # Arquivos ignorados pelo Git
â”œâ”€â”€ index.js             # CÃ³digo principal do bot
â”œâ”€â”€ README.md            # Este arquivo
â””â”€â”€ render.yaml          # ConfiguraÃ§Ãµes do Render (opcional)
```

## ðŸ“ž Suporte

### Problemas Comuns:

1. **"Bot nÃ£o aparece online"** â†’ Verifique token e intents
2. **"Comandos nÃ£o funcionam"** â†’ Verifique permissÃµes
3. **"Erro no deploy"** â†’ Verifique logs no Render

### Como Pedir Ajuda:

1. Verifique este README primeiro
2. Consulte os logs (localmente ou no Render)  
3. Abra uma issue com:
   - DescriÃ§Ã£o do problema
   - Logs de erro (SEM tokens!)
   - Passos para reproduzir

## ðŸ“„ LicenÃ§a

MIT License - Use livremente, mas mantenha os crÃ©ditos!

## ðŸŽ¯ PrÃ³ximos Passos

ApÃ³s configurar o bot:

1. **Teste todos os comandos** no seu servidor
2. **Configure canais e roles** adequadamente  
3. **Monitore logs** por alguns dias
4. **Customize** conforme suas necessidades

---

**ðŸŽ‰ Bot 100% funcional e gratuito no Render.com!**

**âš ï¸ Lembre-se**: SeguranÃ§a Ã© prioridade. Nunca exponha tokens!

// render.yaml (ConfiguraÃ§Ã£o opcional para deploy avanÃ§ado)
services:
  - type: web
    name: discord-divulgacao-bot
    env: node
    plan: free
    region: oregon
    buildCommand: npm ci
    startCommand: npm start
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
    scaling:
      minInstances: 1
      maxInstances: 1

// .github/workflows/deploy.yml (GitHub Actions - opcional)
name: Deploy to Render

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Run tests
      run: npm test
      
  security-check:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Check for secrets in code
      run: |
        if grep -r "MTQxNTQz\|mfa\." --exclude-dir=node_modules .; then
          echo "âŒ Possible Discord token found in code!"
          exit 1
        fi
        echo "âœ… No tokens found in code"

// Dockerfile (Opcional - para containers avanÃ§ados)
FROM node:18-alpine

# Instalar dumb-init para handling de sinais
RUN apk add --no-cache dumb-init

# Criar usuÃ¡rio nÃ£o-root
RUN addgroup -g 1001 -S nodejs && \
    adduser -S discord -u 1001 -G nodejs

# DiretÃ³rio de trabalho
WORKDIR /app

# Copiar arquivos de dependÃªncia primeiro (melhor cache)
COPY package*.json ./
RUN npm ci --only=production && \
    npm cache clean --force

# Copiar cÃ³digo fonte
COPY --chown=discord:nodejs . .

# Trocar para usuÃ¡rio nÃ£o-root
USER discord

# Expor porta
EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \
  CMD node -e "require('http').get('http://localhost:3000/health', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) }).on('error', () => process.exit(1))"

# Usar dumb-init para melhor handling de sinais
ENTRYPOINT ["dumb-init", "--"]
CMD ["node", "index.js"]
